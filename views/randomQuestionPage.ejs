<%-include('./head.ejs') %>
<title>LetsCode Question</title>
<link rel="stylesheet" href="/questionPage.css">
<link rel="stylesheet" href="/popFoot.css">
<link rel="stylesheet" href="/responsiv.css">
<body>
    <div id="blockPg"></div>

    <%-include('./navAndMsg.ejs') %>

    <%if(currUsers && currUsers._id.equals(userData._id)){%>
    <!-- Question list -->
        <h2 style="text-align: center;padding: 10px; color: rgb(183, 180, 180);"><%=randomQuestion.topic%></h2>
        <h5 class="coderTry">Load your logic, aim for clarity, and fire at this <%=randomQuestion.level%>-level challenge!</h5>
        <div id="dataContainer">
                <div class="quesDone">
                    <a href="<%= randomQuestion.urlLink %>" class="queLink" target="_blank" aria-label="<%= randomQuestion.questionName %>">
                        <div class="queTag 
                            <%= randomQuestion.level === 'easy' ? 'easyQue' : 
                                randomQuestion.level === 'medium' ? 'mediumQue' : 
                                randomQuestion.level === 'hard' ? 'hardQue' : '' 
                            %>">
                            &nbsp;&nbsp;&nbsp; <i class="fa-solid fa-star fa-spin"></i> &nbsp;&nbsp;&nbsp; <%= randomQuestion.questionName %> &nbsp;&nbsp;&nbsp; 
                            <% if (randomQuestion.level === 'easy') { %>
                                <% if(userData.easyId.length>0){%>
                                    <% userData.easyId.forEach(function(id) { %>
                                        <% if(id==randomQuestion._id){%><i class="fa-solid fa-check"></i><%}%>
                                    <% }); %>
                                <%}%>
                            <% } else if (randomQuestion.level === 'medium') { %>
                                <% if(userData.mediumId.length>0){%>
                                    <% userData.mediumId.forEach(function(id) { %>
                                        <% if(id==randomQuestion._id){%><i class="fa-solid fa-check"></i><%}%>
                                    <% }); %>
                                <%}%>
                            <% } else if (randomQuestion.level === 'hard') { %>
                                <% if(userData.hardId.length>0){%>
                                    <% userData.hardId.forEach(function(id) { %>
                                        <% if(id==randomQuestion._id){%><i class="fa-solid fa-check"></i><%}%>
                                    <% }); %>
                                <%}%>
                            <% } %>
                        </div>
                    </a>
                    <div class="markDone 
                        <%= randomQuestion.level === 'easy' ? 'easyQue' : 
                            randomQuestion.level === 'medium' ? 'mediumQue' : 
                            randomQuestion.level === 'hard' ? 'hardQue' : '' 
                        %>" data-index="<%= randomQuestion._id %>">
                        <i class="fa-solid fa-code doneOpt"></i>
                    </div>

                    <!-- mark as done option -->
                    <div id="markAsDone-<%= randomQuestion.id %>" class="markAsDone">
                        <form method="post" action="/LetsCode/<%=userData._id%>/<%=randomQuestion._id%>/solved/randomSolved?_method=PUT" id="form<%= randomQuestion._id %>">
                            <h5 style="color: rgb(237, 174, 232);" class="doneThis">Have you done this ?</h5>
                        </form>
                        <div>
                            <button id="sub<%=randomQuestion._id%>" type="submit" data-index="<%= randomQuestion.idNo %>" class="doneBtn subBtns"><i class="fa-solid fa-check"></i> Mark As Done</button>
                            <button id="cancle<%=randomQuestion._id%>" class="doneBtn cancleBtn" data-index="<%= randomQuestion._id %>"><i class="fa-solid fa-xmark"></i> Cancle</button>    
                        </div>
                    </div>
                    <!-- mark as done option -->
                </div>
        </div>
    <!-- Question list -->
    <%}%>

    <%-include('./footer.ejs')%>

    <script src="/inputValidate.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="/questionPage.js"></script>
</body>
</html>