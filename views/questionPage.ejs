<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LetsCode Question</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/questionPage.css">
    <link rel="stylesheet" href="/popFoot.css">
</head>
<body>
    <div id="blockPg"></div>

    <div id="navbarDiv">
        <div id="webName">
            <div id="logo"></div>
            <a href="#" class="active navLink">LetsCode</a>
        </div>
        <div id="mode"><i class="fa-solid fa-sun modeIcon"></i></div>
    </div>


    <!-- Flash message -->
    <%if(error && error.length){%>
        <div class="alert alert-danger alert-dismissible fade show" id="flashId" role="alert" style="align-items: center; text-align: center; font-size: 1.3rem;">
            <%= error %>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    <%}else if(success && success.length){%>  
        <div class="alert alert-success alert-dismissible fade show" id="flashId" role="alert" style="align-items: center; text-align: center; font-size: 1.3rem;">
             <%=success%>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    <%}%>
  <!-- Flash message -->

    <!-- Question list -->
    <% if (ques.length > 0) { %>
        <h2 style="text-align: center;padding: 10px; color: rgb(183, 180, 180);"><%=ques[0].topic%></h2>
        <div id="dataContainer">
            <% ques.forEach((que, idx) => { %>
                <div class="quesDone">
                    <a href="<%= que.urlLink %>" class="queLink" target="_blank" aria-label="<%= que.questionName %>">
                        <div class="queTag 
                            <%= que.level === 'easy' ? 'easyQue' : 
                                que.level === 'medium' ? 'mediumQue' : 
                                que.level === 'hard' ? 'hardQue' : '' 
                            %>">
                            &nbsp;&nbsp;&nbsp; <%= (idx + 1).toString().padStart(2, '0') %>. &nbsp;&nbsp;&nbsp; <%= que.questionName %> &nbsp;&nbsp;&nbsp; 
                            <% if (que.level === 'easy') { %>
                                <% if(userData.easyId.length>0){%>
                                    <% userData.easyId.forEach(function(id) { %>
                                        <% if(id==que._id){%><i class="fa-solid fa-check"></i><%}%>
                                    <% }); %>
                                <%}%>
                            <% } else if (que.level === 'medium') { %>
                                <% if(userData.mediumId.length>0){%>
                                    <% userData.mediumId.forEach(function(id) { %>
                                        <% if(id==que._id){%><i class="fa-solid fa-check"></i><%}%>
                                    <% }); %>
                                <%}%>
                            <% } else if (que.level === 'hard') { %>
                                <% if(userData.hardId.length>0){%>
                                    <% userData.hardId.forEach(function(id) { %>
                                        <% if(id==que._id){%><i class="fa-solid fa-check"></i><%}%>
                                    <% }); %>
                                <%}%>
                            <% } %>
                        </div>
                    </a>
                    <div class="markDone 
                        <%= que.level === 'easy' ? 'easyQue' : 
                            que.level === 'medium' ? 'mediumQue' : 
                            que.level === 'hard' ? 'hardQue' : '' 
                        %>" data-index="<%= que._id %>">
                        <i class="fa-solid fa-code"></i>
                    </div>

                    <!-- mark as done option -->
                    <div id="markAsDone-<%= que.id %>" class="markAsDone">
                        <form method="post" action="/LetsCode/<%=id%>/<%=que._id%>/solved/topicSolved?_method=PUT" id="form<%= que._id %>">
                            <h5 style="color: rgb(237, 174, 232);">Have you done this ?</h5>
                        </form>
                        <div>
                            <button id="sub<%=que._id%>" type="submit" data-index="<%= que.idNo %>" class="doneBtn" style="background-color: rgb(92, 168, 168);"><i class="fa-solid fa-check"></i> Mark As Done</button>
                            <button id="cancle<%=que._id%>" class="doneBtn cancleBtn" data-index="<%= que._id %>" style="background-color: rgb(219, 108, 138);"><i class="fa-solid fa-xmark"></i> Cancle</button>    
                        </div>
                    </div>
                    <!-- mark as done option -->
                </div>
                
            <% }); %>
        </div>
    <% } else { %>
        <div id="emptyState"><h2 style="text-align: center;padding: 1rem;">No questions available !</h2></div>
    <% } %>
    <!-- Question list -->

    <!-- footer code -->
    <div id="footer"></div>
        <div class="footBox">
            <a href="#" class="socialLink"><div class="circleBox"><i class="fa-brands fa-linkedin-in iconSize"></i></div></a>
            <a href="#" class="socialLink"><div class="circleBox"><i class="fa-brands fa-github iconSize"></i></div></a>
            <a href="#" class="socialLink"><div class="circleBox"><i class="fa-brands fa-twitter iconSize"></i></div></a>
            <a href="#" class="socialLink"><div class="circleBox"><i class="fa-solid fa-code iconSize"></i></div></a>
        </div>
        <div class="designedTag">
            <p>Designed And Created By Vishal Paswan.<br><i class="fa-regular fa-copyright"></i> LetsCode INDIA, All Rights Reserved.</p>
        </div>
    </div>
    <!-- footer code -->


    <script src="/inputValidate.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="/questionPage.js"></script>
</body>
</html>